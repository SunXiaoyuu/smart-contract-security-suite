<mat-card>
  <h2>ЁЯзй цЩ║шГ╜хРИч║жц╝Пц┤Юф┐ошбецибхЭЧ</h2>

  <!-- хРИч║жф╗гчаБш╛УхЕе -->
  <mat-form-field appearance="outline" class="w-full">
    <mat-label>цЩ║шГ╜хРИч║жф╗гчаБ</mat-label>
    <textarea
      matInput
      placeholder="ч▓Шш┤┤щЬАшжБф┐ошбечЪДцЩ║шГ╜хРИч║жф╗гчаБ..."
      [(ngModel)]="code"
      rows="8">
    </textarea>
  </mat-form-field>

  <!-- хобшобцКехСКш╛УхЕе -->
  <mat-form-field appearance="outline" class="w-full">
    <mat-label>хобшобцКехСК</mat-label>
    <textarea
      matInput
      placeholder="ч▓Шш┤┤ц╝Пц┤ЮхобшобцКехСКя╝ИхПпф╗ецШпцгАц╡ЛцибхЭЧчФЯцИРчЪДцКехСКя╝Й..."
      [(ngModel)]="reports"
      rows="6">
    </textarea>
  </mat-form-field>

  <div class="button-group">
    <!-- х╝АхзЛхИЖцЮРцМЙщТо -->
    <button 
      mat-raised-button 
      color="primary" 
      (click)="applySuggestion()"
      [disabled]="isAnalyzing"
      style="margin-right: 10px;">
      <mat-spinner *ngIf="isAnalyzing" diameter="20" style="display: inline-block; margin-right: 8px;"></mat-spinner>
      {{ isAnalyzing ? 'хИЖцЮРф╕н...' : 'ЁЯФН х╝АхзЛхИЖцЮР' }}
    </button>

    <!-- х╝АхзЛф┐ошбецМЙщТо -->
    <button 
      mat-raised-button 
      color="accent" 
      (click)="applyPatch()"
      [disabled]="isRepairing">
      <mat-spinner *ngIf="isRepairing" diameter="20" style="display: inline-block; margin-right: 8px;"></mat-spinner>
      {{ isRepairing ? 'ф┐ошбеф╕н...' : 'ЁЯФз х╝АхзЛф┐ошбе' }}
    </button>

    <button 
      mat-raised-button 
      color="warn" 
      (click)="goToReDetection()"
      [disabled]="!repairedCode">
      ф╕Лф╕Ацнея╝ЪхЖНцмбцгАц╡Л тЖТ
    </button>
  </div>


  <!-- ф┐ошбех╗║шооцШ╛чд║ -->
  <div *ngIf="patchSuggestions" style="margin-top: 20px;">
    <h3>ЁЯТб ф┐ошбех╗║шоо</h3>
    <mat-list>
      <mat-list-item *ngFor="let v of patchSuggestions.suggestion">
        <div style="display: flex; align-items: flex-start; width: 100%;">
          <b style="color: #1976d2; margin-right: 10px;">{{ v.num }}.</b>
          <div>
            <span *ngIf="v.line !== '-'" style="color: #f57c00; font-weight: bold;">
              чмм {{ v.line }} шбМя╝Ъ
            </span>
            {{ v.sug }}
          </div>
        </div>
      </mat-list-item>
    </mat-list>
  </div>

  <!-- ф┐ошбеч╗УцЮЬцШ╛чд║ -->
  <div *ngIf="repairedCode" style="margin-top: 20px;">
    <div style="display: flex; justify-content: space-between; align-items: center;">
      <h3>тЬЕ ф┐ошбеч╗УцЮЬ</h3>
      <button mat-stroked-button color="primary" (click)="copyRepairedCode()">
        ЁЯУЛ хдНхИ╢ф╗гчаБ
      </button>
    </div>
    <pre style="background: #f5f5f5; padding: 15px; border-radius: 8px; overflow-x: auto;">{{ repairedCode }}</pre>
  </div>
  
</mat-card>